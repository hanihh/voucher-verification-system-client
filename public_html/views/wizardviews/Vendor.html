<!DOCTYPE html>

<div ng-controller='VendorController'>
    <div class="portlet-body form">
        <form action="#" class="form-horizontal form-bordered">
            <div class="form-body">  


                <div class="form-group">
                    <label class="control-label col-md-3">Vendor</label>
                    <div class="col-md-4">
                        <select class="form-control input-medium select2me" data-placeholder="Select..." ng-model='vendor.vendor' ng-options='vendorItem.name for vendorItem in vendorItems track by vendorItem.id' required></select>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-sm-3 control-label">Phones</label>
                    <div class="col-sm-4">
                        <div class="input-group">
                            <span class="input-group-addon">
                                <i class="fa fa-search"></i>
                            </span>
                            <input type="text" id="typeahead_imei" class="form-control" />        
                        </div>
                        <p class="help-block">
                            <code>E.g:</code>
                        </p>
                    </div>
                </div>


                <div class="form-group">
                    <label class="control-label col-md-3">Chosen Phones</label>
                    <div class="col-md-6">
                        <input id="tags_2" type="text" class="form-control tags medium" ng-model='vendor.chosenPhones' value=""/>
                    </div>
                </div>

                <div class="form-group" style="float: right">
                    <button style="width:100px" type="button" class="btn red"><i class="fa fa-times"></i> Cancel</button>
                    <button  style="width:100px" type="button" class="btn green" ng-click="Save(vendor)"><i class="fa fa-floppy-o"></i> Save</button>
                </div>
            </div>   
        </form>
    </div>
</div>

<!-- Tags related PLUGINS -->
<script src="include/theme/metronic/admin/pages/scripts/components-form-tools.js"></script>
<script src="include/theme/metronic/global/plugins/jquery-tags-input/jquery.tagsinput.min.js" type="text/javascript"></script>
<!-- END PLUGINS -->   

<script>
    jQuery(document).ready(function () {
        Metronic.init(); // init metronic core components
        ComponentsFormTools.init();
    });



    function InitImeiTypeahead(phones) {
        // constructs the suggestion engine
        var phones = new Bloodhound({
            datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),
            queryTokenizer: Bloodhound.tokenizers.whitespace,
            // `phones` is an array of phone names defined in "The Basics"
            local: $.map(phones, function (phone) {
                return {value: phone.imei};
            })
        });

        // kicks off the loading/processing of `local` and `prefetch`
        phones.initialize();

        $('#typeahead_imei').typeahead({
            hint: true,
            highlight: true,
            minLength: 1

        },
        {
            name: 'phones',
            displayKey: 'value',
            // `ttAdapter` wraps the suggestion engine in an adapter that
            // is compatible with the typeahead jQuery plugin
            source: phones.ttAdapter()
        });

        $('#typeahead_imei').on('typeahead:selected', function (e, data) {
            $('#tags_2').addTag(data.value);

        });
    }
</script>
